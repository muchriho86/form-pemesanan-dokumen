<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Form Pemesanan Dokumen</title>
  <style>
    /* … (CSS sama seperti sebelumnya) … */
  </style>
</head>
<body>
  <!-- FORM UTAMA UNTUK USER (visible) -->
  <div class="container">
    <h2>Pemesanan Dokumen Perpustakaan</h2>
    <form id="orderForm">
      <!-- fields seperti biasa -->
      <label for="nama">Nama Pemesan</label>
      <input type="text" id="nama" required/>

      <label for="wa">No HP / WhatsApp</label>
      <input type="text" id="wa" required/>

      <label for="alamat">Alamat Kirim</label>
      <textarea id="alamat" rows="2" required></textarea>

      <label for="jenis">Jenis Dokumen</label>
      <select id="jenis" required>
        <option value="">-- Pilih --</option>
        <option value="Tesis">Tesis</option>
        <option value="Disertasi">Disertasi</option>
        <option value="Lainnya">Lainnya</option>
      </select>

      <label for="rincian">Rincian Pesanan</label>
      <textarea id="rincian" rows="3" required></textarea>

      <button type="submit">Kirim Pesanan</button>
    </form>
    <div class="footer">© Perpustakaan Digital</div>
  </div>

  <!-- FORM TERSEMBUNYI UNTUK GOOGLE FORM -->
  <iframe name="hidden_iframe" style="display:none;"></iframe>
  <form id="googleForm"
        action="https://docs.google.com/forms/d/e/1FAIpQLSdjrQUGgKTKmlaHK7eDRRBuDf7OP0Sv0hnP-j8sJ_DTX4hULQ/formResponse"
        method="POST"
        target="hidden_iframe">
    <input type="hidden" name="entry.2005620554" id="g_nama"/>
    <input type="hidden" name="entry.1065046570" id="g_wa"/>
    <input type="hidden" name="entry.1166974658" id="g_alamat"/>
    <input type="hidden" name="entry.839337160" id="g_jenis"/>
    <input type="hidden" name="entry.1221879017" id="g_rincian"/>
  </form>

  <script>
    const orderForm = document.getElementById("orderForm");
    const googleForm = document.getElementById("googleForm");

    orderForm.addEventListener("submit", function(e) {
      e.preventDefault();

      // Ambil nilai
      const nama    = document.getElementById("nama").value;
      const wa      = document.getElementById("wa").value;
      const alamat  = document.getElementById("alamat").value;
      const jenis   = document.getElementById("jenis").value;
      const rincian = document.getElementById("rincian").value;

      // Set ke form tersembunyi
      document.getElementById("g_nama").value    = nama;
      document.getElementById("g_wa").value      = wa;
      document.getElementById("g_alamat").value  = alamat;
      document.getElementById("g_jenis").value   = jenis;
      document.getElementById("g_rincian").value = rincian;

      // 1️⃣ Kirim ke Google Form via iframe
      googleForm.submit();

      // 2️⃣ Setelah submit, redirect ke WhatsApp
      const adminNumber = "62881081594000";
      const msg = `Halo Admin, saya ingin memesan dokumen:\n\nNama: ${nama}\nWA: ${wa}\nAlamat: ${alamat}\nJenis: ${jenis}\nRincian: ${rincian}`;
      const whatsappURL = `https://wa.me/${adminNumber}?text=${encodeURIComponent(msg)}`;

      // beri jeda 500ms supaya form sempat terkirim
      setTimeout(() => {
        window.location.href = whatsappURL;
      }, 500);
    });
  </script>
</body>
</html>
